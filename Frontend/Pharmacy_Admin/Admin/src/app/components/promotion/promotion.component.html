<h2>üìã Danh s√°ch Khuy·∫øn m√£i</h2>
<button
  class="btn btn-success mb-3"
  data-toggle="modal"
  data-target="#addPromotionModal"
>
  <i class="mdi mdi-plus-circle mr-1"></i> Th√™m khuy·∫øn m√£i
</button>
<table
  border="1"
  cellpadding="8"
  cellspacing="0"
  style="width: 100%; margin-bottom: 20px"
>
  <thead>
    <tr>
      <th>ID</th>
      <th>T√™n khuy·∫øn m√£i</th>
      <th>S·∫£n ph·∫©m</th>
      <th>Lo·∫°i</th>
      <th>Tr·∫°ng th√°i</th>
      <th>Gi√° tr·ªã gi·∫£m</th>
      <th>B·∫Øt ƒë·∫ßu</th>
      <th>K·∫øt th√∫c</th>
      <th>M√£ Coupon</th>
      <th>S·ªë l∆∞·ª£ng</th>
      <th>ƒê√£ d√πng</th>
      <th>Thao t√°c</th>
    </tr>
  </thead>
  <tbody>
    <tr *ngFor="let promo of promotions">
      <td>{{ promo.id }}</td>
      <td>{{ promo.promotionName }}</td>
      <td>{{ promo.productName }}</td>
      <td>{{ promo.promotionType }}</td>
      <td>{{ promo.status }}</td>
      <td>
        {{ promo.discountValue }}{{ promo.isPercentageDiscount ? "%" : "‚Ç´" }}
      </td>
      <td>{{ promo.startDate }}</td>
      <td>{{ promo.endDate }}</td>
      <td>{{ promo.couponCode }}</td>
      <td>{{ promo.quantity }}</td>
      <td>{{ promo.quantity - promo.currentQuantity }}</td>
      <td>
        <button
          (click)="viewPromotion(promo.id)"
          data-toggle="modal"
          data-target="#editPromotionModal"
        >
          S·ª≠a
        </button>
        <button (click)="deletePromotion(promo.id)">X√≥a</button>
      </td>
    </tr>
  </tbody>
</table>

<hr />

<div
  class="modal fade"
  id="addPromotionModal"
  tabindex="-1"
  role="dialog"
  aria-labelledby="addPromotionModalLabel"
  aria-hidden="true"
>
  <div class="modal-dialog modal-lg" role="document">
    <div class="modal-content">
      <!-- Header -->
      <div class="modal-header">
        <h5 class="modal-title" id="addPromotionModalLabel">
          <i class="mdi mdi-sale mr-2"></i>‚ûï Th√™m khuy·∫øn m√£i m·ªõi
        </h5>
        <button
          type="button"
          class="close"
          data-dismiss="modal"
          aria-label="Close"
        >
          <span aria-hidden="true">&times;</span>
        </button>
      </div>

      <!-- Body -->
      <div class="modal-body">
        <form (ngSubmit)="createPromotion()" #promotionForm="ngForm">
          <div class="row">
            <!-- C·ªôt tr√°i -->
            <div class="col-md-6">
              <div class="form-group">
                <label>T√™n khuy·∫øn m√£i:</label>
                <input
                  type="text"
                  class="form-control"
                  [(ngModel)]="newPromotion.promotionName"
                  name="promotionName"
                  required
                />
              </div>

              <div class="form-group">
                <label>S·∫£n ph·∫©m √°p d·ª•ng:</label>
                <select
                  class="form-control"
                  [(ngModel)]="newPromotion.productId"
                  name="productId"
                  required
                >
                  <option value="" disabled selected>
                    -- Ch·ªçn s·∫£n ph·∫©m --
                  </option>
                  <option *ngFor="let p of products" [value]="p.id">
                    {{ p.name }}
                  </option>
                </select>
              </div>

              <div class="form-group">
                <label>Lo·∫°i khuy·∫øn m√£i:</label>
                <select
                  class="form-control"
                  [(ngModel)]="newPromotion.promotionType"
                  name="promotionType"
                >
                  <option value="DISCOUNT">DISCOUNT</option>
                  <option value="FREE_SHIP">FREE_SHIP</option>
                </select>
              </div>

              <div class="form-group">
                <label>Tr·∫°ng th√°i:</label>
                <select
                  class="form-control"
                  [(ngModel)]="newPromotion.status"
                  name="status"
                >
                  <option value="ACTIVE">ACTIVE</option>
                  <option value="INACTIVE">INACTIVE</option>
                  <option value="EXPIRED">EXPIRED</option>
                  <option value="UPCOMING">UPCOMING</option>
                </select>
              </div>

              <div class="form-group">
                <label>Gi√° tr·ªã gi·∫£m:</label>
                <input
                  type="number"
                  class="form-control"
                  [(ngModel)]="newPromotion.discountValue"
                  name="discountValue"
                />
              </div>

              <div class="form-group form-check">
                <input
                  type="checkbox"
                  class="form-check-input"
                  [(ngModel)]="newPromotion.isPercentageDiscount"
                  name="isPercentageDiscount"
                  id="isPercentageDiscount"
                />
                <label class="form-check-label" for="isPercentageDiscount"
                  >L√† % gi·∫£m?</label
                >
              </div>
            </div>

            <!-- C·ªôt ph·∫£i -->
            <div class="col-md-6">
              <div class="form-group">
                <label>Ng√†y b·∫Øt ƒë·∫ßu:</label>
                <input
                  type="date"
                  class="form-control"
                  [(ngModel)]="newPromotion.startDate"
                  name="startDate"
                />
              </div>

              <div class="form-group">
                <label>Ng√†y k·∫øt th√∫c:</label>
                <input
                  type="date"
                  class="form-control"
                  [(ngModel)]="newPromotion.endDate"
                  name="endDate"
                />
              </div>

              <div class="form-group">
                <label>S·ªë l∆∞·ª£ng:</label>
                <input
                  type="number"
                  class="form-control"
                  [(ngModel)]="newPromotion.quantity"
                  name="quantity"
                />
              </div>

              <div class="form-group">
                <label>M√£ Coupon:</label>
                <input
                  type="text"
                  class="form-control"
                  [(ngModel)]="newPromotion.couponCode"
                  name="couponCode"
                />
              </div>
            </div>
          </div>
        </form>
      </div>

      <!-- Footer -->
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">
          <i class="mdi mdi-close mr-1"></i>H·ªßy
        </button>
        <button
          type="button"
          class="btn btn-primary"
          [disabled]="promotionForm.invalid"
          (click)="createPromotion()"
        >
          <i class="mdi mdi-check mr-1"></i>T·∫°o khuy·∫øn m√£i
        </button>
      </div>
    </div>
  </div>
</div>
<hr />
<!-- Sua khuyen mai -->
<div
  class="modal fade"
  id="editPromotionModal"
  tabindex="-1"
  role="dialog"
  aria-labelledby="editPromotionModalLabel"
  aria-hidden="true"
>
  <div class="modal-dialog modal-lg" role="document">
    <div class="modal-content" *ngIf="selectedPromotion">
      <!-- Header -->
      <div class="modal-header">
        <h5 class="modal-title" id="editPromotionModalLabel">
          <i class="mdi mdi-pencil mr-2"></i>‚úèÔ∏è S·ª≠a khuy·∫øn m√£i ID
          {{ selectedPromotion.id }}
        </h5>
        <button
          type="button"
          class="close"
          data-dismiss="modal"
          aria-label="Close"
        >
          <span aria-hidden="true">&times;</span>
        </button>
      </div>

      <!-- Body -->
      <div class="modal-body">
        <form #editForm="ngForm">
          <div class="row">
            <!-- C·ªôt tr√°i -->
            <div class="col-md-6">
              <div class="form-group">
                <label>T√™n khuy·∫øn m√£i:</label>
                <input
                  type="text"
                  class="form-control"
                  [(ngModel)]="selectedPromotion.promotionName"
                  name="editPromotionName"
                  required
                />
              </div>

              <div class="form-group">
                <label>S·∫£n ph·∫©m √°p d·ª•ng:</label>
                <select
                  class="form-control"
                  [(ngModel)]="selectedPromotion.productId"
                  name="editProductId"
                  required
                >
                  <option value="" disabled>-- Ch·ªçn s·∫£n ph·∫©m --</option>
                  <option *ngFor="let p of products" [value]="p.id">
                    {{ p.name }}
                  </option>
                </select>
              </div>

              <div class="form-group">
                <label>Lo·∫°i khuy·∫øn m√£i:</label>
                <select
                  class="form-control"
                  [(ngModel)]="selectedPromotion.promotionType"
                  name="editPromotionType"
                >
                  <option value="DISCOUNT">DISCOUNT</option>
                  <option value="FREE_SHIP">FREE_SHIP</option>
                </select>
              </div>

              <div class="form-group">
                <label>Tr·∫°ng th√°i:</label>
                <select
                  class="form-control"
                  [(ngModel)]="selectedPromotion.status"
                  name="editStatus"
                >
                  <option value="ACTIVE">ACTIVE</option>
                  <option value="INACTIVE">INACTIVE</option>
                  <option value="EXPIRED">EXPIRED</option>
                  <option value="UPCOMING">UPCOMING</option>
                </select>
              </div>

              <div class="form-group">
                <label>Gi√° tr·ªã gi·∫£m:</label>
                <input
                  type="number"
                  class="form-control"
                  [(ngModel)]="selectedPromotion.discountValue"
                  name="editDiscountValue"
                />
              </div>

              <div class="form-group form-check">
                <input
                  type="checkbox"
                  class="form-check-input"
                  [(ngModel)]="selectedPromotion.isPercentageDiscount"
                  name="editIsPercentageDiscount"
                  id="editIsPercentageDiscount"
                />
                <label class="form-check-label" for="editIsPercentageDiscount">
                  L√† % gi·∫£m?
                </label>
              </div>
            </div>

            <!-- C·ªôt ph·∫£i -->
            <div class="col-md-6">
              <div class="form-group">
                <label>Ng√†y b·∫Øt ƒë·∫ßu:</label>
                <input
                  type="date"
                  class="form-control"
                  [(ngModel)]="selectedPromotion.startDate"
                  name="editStartDate"
                />
              </div>

              <div class="form-group">
                <label>Ng√†y k·∫øt th√∫c:</label>
                <input
                  type="date"
                  class="form-control"
                  [(ngModel)]="selectedPromotion.endDate"
                  name="editEndDate"
                />
              </div>

              <div class="form-group">
                <label>S·ªë l∆∞·ª£ng:</label>
                <input
                  type="number"
                  class="form-control"
                  [(ngModel)]="selectedPromotion.quantity"
                  name="editQuantity"
                />
              </div>

              <div class="form-group">
                <label>M√£ Coupon:</label>
                <input
                  type="text"
                  class="form-control"
                  [(ngModel)]="selectedPromotion.couponCode"
                  name="editCouponCode"
                />
              </div>
            </div>
          </div>
        </form>
      </div>

      <!-- Footer -->
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">
          <i class="mdi mdi-close mr-1"></i>H·ªßy
        </button>
        <button
          type="button"
          class="btn btn-primary"
          (click)="updatePromotion()"
        >
          <i class="mdi mdi-check mr-1"></i>C·∫≠p nh·∫≠t
        </button>
      </div>
    </div>
  </div>
</div>
