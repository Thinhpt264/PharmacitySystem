<br>
    <div class="container">
        <div class="checkout-header">
            <h1>Thanh To√°n</h1>
            <p>Vui l√≤ng ƒëi·ªÅn ƒë·∫ßy ƒë·ªß th√¥ng tin ƒë·ªÉ ho√†n t·∫•t ƒë∆°n h√†ng</p>
        </div>

        <div class="form-container">
            <div class="success-message" id="successMessage">
                ‚úÖ ƒê∆°n h√†ng c·ªßa b·∫°n ƒë√£ ƒë∆∞·ª£c x·ª≠ l√Ω th√†nh c√¥ng!
            </div>

            <form id="checkoutForm">
                <!-- Th√¥ng tin c√° nh√¢n -->
                <div class="section">
                    <h2 class="section-title">
                        <span class="section-icon">üë§</span>
                        Th√¥ng tin c√° nh√¢n
                    </h2>
                    <div class="form-grid">
                        <div class="form-group">
                            <label for="firstName">H·ªç <span class="required">*</span></label>
                            <input type="text" id="firstName" name="firstName" required>
                        </div>
                        <div class="form-group">
                            <label for="lastName">T√™n <span class="required">*</span></label>
                            <input type="text" id="lastName" name="lastName" required>
                        </div>
                        <div class="form-group">
                            <label for="email">Email <span class="required">*</span></label>
                            <input type="email" id="email" name="email" required>
                        </div>
                        <div class="form-group">
                            <label for="phone">S·ªë ƒëi·ªán tho·∫°i <span class="required">*</span></label>
                            <input type="tel" id="phone" name="phone" required>
                        </div>
                        <div class="form-group">
                            <label for="company">T√™n c√¥ng ty (t√πy ch·ªçn)</label>
                            <input type="text" id="company" name="company">
                        </div>
                    </div>
                </div>

                <!-- ƒê·ªãa ch·ªâ -->
                <div class="section">
                    <h2 class="section-title">
                        <span class="section-icon">üìç</span>
                        ƒê·ªãa ch·ªâ giao h√†ng
                    </h2>
                    <div class="address-grid">
                        <div class="form-group">
                            <label for="province">T·ªânh/Th√†nh ph·ªë <span class="required">*</span></label>
                            <select id="province" name="province" required>
                                <option value="">Ch·ªçn t·ªânh/th√†nh ph·ªë</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="district">Qu·∫≠n/Huy·ªán <span class="required">*</span></label>
                            <select id="district" name="district" required disabled>
                                <option value="">Ch·ªçn qu·∫≠n/huy·ªán</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="ward">Ph∆∞·ªùng/X√£ <span class="required">*</span></label>
                            <select id="ward" name="ward" required disabled>
                                <option value="">Ch·ªçn ph∆∞·ªùng/x√£</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-group full-width">
                        <label for="address">ƒê·ªãa ch·ªâ c·ª• th·ªÉ <span class="required">*</span></label>
                        <input type="text" id="address" name="address" placeholder="S·ªë nh√†, t√™n ƒë∆∞·ªùng..." required>
                    </div>
                </div>
                

                <!-- Ph∆∞∆°ng th·ª©c thanh to√°n -->
                <div class="section">
                    <h2 class="section-title">
                        <span class="section-icon">üí≥</span>
                        Ph∆∞∆°ng th·ª©c thanh to√°n
                    </h2>
                    <div class="payment-methods">
                        <div class="payment-option">
                            <input type="radio" id="cash" name="paymentMethod" value="cash" required>
                            <label for="cash">
                                <div class="payment-card">
                                    <div class="payment-icon">üíµ</div>
                                    <div class="payment-title">Ti·ªÅn m·∫∑t</div>
                                    <div class="payment-desc">Thanh to√°n khi nh·∫≠n h√†ng</div>
                                </div>
                            </label>
                        </div>
                        <div class="payment-option">
                            <input type="radio" id="vnpay" name="paymentMethod" value="vnpay" required>
                            <label for="vnpay">
                                <div class="payment-card">
                                    <div class="payment-icon">üè¶</div>
                                    <div class="payment-title">VNPay</div>
                                    <div class="payment-desc">Thanh to√°n online qua VNPay</div>
                                </div>
                            </label>
                        </div>
                    </div>
                </div>

                <!-- Ghi ch√∫ -->
                <div class="section">
                    <h2 class="section-title">
                        <span class="section-icon">üìù</span>
                        Ghi ch√∫ ƒë∆°n h√†ng (t√πy ch·ªçn)
                    </h2>
                    <div class="form-group">
                        <textarea id="notes" name="notes"
                            placeholder="Ghi ch√∫ v·ªÅ ƒë∆°n h√†ng c·ªßa b·∫°n, v√≠ d·ª•: ghi ch√∫ ƒë·∫∑c bi·ªát cho vi·ªác giao h√†ng..."></textarea>
                    </div>
                </div>

                <button type="submit" class="submit-btn">Ho√†n t·∫•t ƒë∆°n h√†ng</button>
            </form>
        </div>
    </div>
    <br>

    <script>
        // API Data for Vietnam provinces
        let provinceData = {};
        let isDataLoaded = false;
    
        // Load Vietnam address data
        async function loadAddressData() {
            try {
                const response = await fetch('https://provinces.open-api.vn/api/?depth=3');
                const data = await response.json();
    
                provinceData = {};
                data.forEach(province => {
                    provinceData[province.code] = {
                        name: province.name,
                        districts: {}
                    };
    
                    province.districts.forEach(district => {
                        provinceData[province.code].districts[district.code] = {
                            name: district.name,
                            wards: district.wards.map(ward => ({
                                code: ward.code,
                                name: ward.name
                            }))
                        };
                    });
                });
    
                populateProvinces(data);
                isDataLoaded = true;
            } catch (error) {
                console.error('Error loading address data:', error);
                // Fallback data
                const fallbackData = [
                    { code: 1, name: 'H√† N·ªôi', districts: [{ code: 1, name: 'Ba ƒê√¨nh', wards: [{ code: 1, name: 'Ph∆∞·ªùng Ph√∫c X√°' }] }] },
                    { code: 79, name: 'TP. H·ªì Ch√≠ Minh', districts: [{ code: 760, name: 'Qu·∫≠n 1', wards: [{ code: 760101, name: 'Ph∆∞·ªùng B·∫øn Ngh√©' }] }] }
                ];
                populateProvinces(fallbackData);
            }
        }
    
        function populateProvinces(data) {
            const provinceSelect = document.getElementById('province');
            if (!provinceSelect) {
                console.error('Element with ID "province" not found');
                return;
            }
            provinceSelect.innerHTML = '<option value="">Ch·ªçn t·ªânh/th√†nh ph·ªë</option>';
    
            data.forEach(province => {
                const option = document.createElement('option');
                option.value = province.code;
                option.textContent = province.name;
                provinceSelect.appendChild(option);
            });
        }
    
        function populateDistricts(provinceCode) {
            const districtSelect = document.getElementById('district');
            const wardSelect = document.getElementById('ward');
            if (!districtSelect || !wardSelect) {
                console.error('District or Ward select element not found');
                return;
            }
    
            districtSelect.innerHTML = '<option value="">Ch·ªçn qu·∫≠n/huy·ªán</option>';
            wardSelect.innerHTML = '<option value="">Ch·ªçn ph∆∞·ªùng/x√£</option>';
            wardSelect.disabled = true;
    
            if (provinceCode && provinceData[provinceCode]) {
                const districts = provinceData[provinceCode].districts;
                Object.keys(districts).forEach(districtCode => {
                    const option = document.createElement('option');
                    option.value = districtCode;
                    option.textContent = districts[districtCode].name;
                    districtSelect.appendChild(option);
                });
                districtSelect.disabled = false;
            } else {
                districtSelect.disabled = true;
            }
        }
    
        function populateWards(provinceCode, districtCode) {
            const wardSelect = document.getElementById('ward');
            if (!wardSelect) {
                console.error('Ward select element not found');
                return;
            }
            wardSelect.innerHTML = '<option value="">Ch·ªçn ph∆∞·ªùng/x√£</option>';
    
            if (provinceCode && districtCode && provinceData[provinceCode] && provinceData[provinceCode].districts[districtCode]) {
                const wards = provinceData[provinceCode].districts[districtCode].wards;
                wards.forEach(ward => {
                    const option = document.createElement('option');
                    option.value = ward.code;
                    option.textContent = ward.name;
                    wardSelect.appendChild(option);
                });
                wardSelect.disabled = false;
            } else {
                wardSelect.disabled = true;
            }
        }
    
        // Event listeners for address selects and other interactions
        document.addEventListener('DOMContentLoaded', () => {
            const provinceSelect = document.getElementById('province');
            const districtSelect = document.getElementById('district');
            const checkoutForm = document.getElementById('checkoutForm');
    
            if (provinceSelect) {
                provinceSelect.addEventListener('change', function () {
                    populateDistricts(this.value);
                });
            } else {
                console.error('Province select element not found');
            }
    
            if (districtSelect) {
                districtSelect.addEventListener('change', function () {
                    const provinceCode = document.getElementById('province').value;
                    populateWards(provinceCode, this.value);
                });
            } else {
                console.error('District select element not found');
            }
    
            // Payment method selection
            document.querySelectorAll('input[name="paymentMethod"]').forEach(radio => {
                radio.addEventListener('change', function () {
                    document.querySelectorAll('.payment-card').forEach(card => {
                        card.classList.remove('selected');
                    });
    
                    if (this.checked) {
                        this.closest('.payment-option')?.querySelector('.payment-card')?.classList.add('selected');
                    }
                });
            });
    
            // Form submission
            if (checkoutForm) {
                checkoutForm.addEventListener('submit', function (e) {
                    e.preventDefault();
    
                    const submitBtn = document.querySelector('.submit-btn');
                    const successMessage = document.getElementById('successMessage');
    
                    // Validate required fields
                    const requiredFields = this.querySelectorAll('[required]');
                    let isValid = true;
    
                    requiredFields.forEach(field => {
                        if (!field.value.trim()) {
                            field.style.borderColor = '#e74c3c';
                            isValid = false;
                        } else {
                            field.style.borderColor = '#ecf0f1';
                        }
                    });
    
                    if (!isValid) {
                        alert('Vui l√≤ng ƒëi·ªÅn ƒë·∫ßy ƒë·ªß c√°c tr∆∞·ªùng b·∫Øt bu·ªôc!');
                        return;
                    }
    
                    // Show loading state
                    if (submitBtn) {
                        submitBtn.textContent = 'ƒêang x·ª≠ l√Ω...';
                        submitBtn.classList.add('loading');
                        submitBtn.disabled = true;
                    }
    
                    // Simulate API call
                    setTimeout(() => {
                        // Reset button
                        if (submitBtn) {
                            submitBtn.textContent = 'Ho√†n t·∫•t ƒë∆°n h√†ng';
                            submitBtn.classList.remove('loading');
                            submitBtn.disabled = false;
                        }
    
                        // Show success message
                        if (successMessage) {
                            successMessage.style.display = 'block';
                        }
    
                        // Get form data
                        const formData = new FormData(this);
                        const orderData = {};
                        for (let [key, value] of formData.entries()) {
                            orderData[key] = value;
                        }
    
                        console.log('Order data:', orderData);
    
                        // Scroll to top
                        const container = document.querySelector('.container');
                        if (container) {
                            container.scrollIntoView({ behavior: 'smooth' });
                        }
    
                        // Hide success message after 5 seconds
                        if (successMessage) {
                            setTimeout(() => {
                                successMessage.style.display = 'none';
                            }, 5000);
                        }
                    }, 2000);
                });
            } else {
                console.error('Checkout form element not found');
            }
    
            // Add some interactive effects
            document.querySelectorAll('input, select, textarea').forEach(element => {
                element.addEventListener('focus', function () {
                    this.parentElement.style.transform = 'scale(1.02)';
                });
    
                element.addEventListener('blur', function () {
                    this.parentElement.style.transform = 'scale(1)';
                });
            });
    
            // Load address data when page loads
            loadAddressData();
        });
    </script>
